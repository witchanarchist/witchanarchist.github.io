<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Guestbook</title>
<style>
body {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
	width: 100%;
    margin: 0;
    background-image: url('bcg.png');
    font-family: Arial, sans-serif;
  }

	h1 {
	 color: white;
	 margin-bottom: 20px;
	}

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
	width: 80%;
  }

  .guestbook {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    justify-content: center;
	width: 100%;
	gap: 20px;
  }
  .entry {
	width: 369px;
	height: 205px;
	border: 2px solid #666;
	overflow: hidden;
	display: flex;
	background-color: white;
	align-items: flex-start;
	justify-content: center;
  }

  .entry-content {
	text-align: center;
	padding: 5px;
	width: 100%;
	height: 100%;
	overflow: hidden;
	overflow-wrap: break-word;
	font-size: 19px;
  }
  .error {
    color: white;
    font-size: 1.2em;
    text-align: center;
    grid-column: 1 / -1;
	font-size: 30px;
  }
</style>
</head>
<body>
<div class="container">
<h1>🕮 GuestBook 🕮</h1>
<div class="guestbook" id="guestbook" ></div></div>

<script>
  async function loadGuestbook() {
    const guestbook = document.getElementById('guestbook');
    const maxLength = 360; 

    try {
      const response = await fetch('gbentries.txt');
      const text = await response.text();

      const entries = text.split('---').map(e => e.trim()).filter(Boolean);
		
		if (entries.length === 0) {
			const entryDiv = document.createElement('div');
			entryDiv.className = 'error';
			entryDiv.textContent = 'ฅᨐฅ No entires yet! Sorry everyone! ฅᨐฅ';
			guestbook.appendChild(entryDiv);
			return;
    }
      entries.forEach(entryText => {
        if(entryText.length > maxLength) {
          const truncated = entryText.slice(0, maxLength);
          const lastSpace = truncated.lastIndexOf(' ');
          if(lastSpace > 0) {
            entryText = truncated.slice(0, lastSpace);
          } else {
            entryText = truncated; 
          }
        }

        const entryDiv = document.createElement('div');
        entryDiv.className = 'entry';
		const contentDiv = document.createElement('div');
        contentDiv.className = 'entry-content';
        contentDiv.textContent = entryText;
		entryDiv.appendChild(contentDiv);
        guestbook.appendChild(entryDiv);
      });
    } catch (err) {
      console.error('Error loading guestbook:', err);
	  const entryDiv = document.createElement('div');
		entryDiv.className = 'error';
		entryDiv.textContent = 'ฅᨐฅ No entires yet! Sorry everyone! ฅᨐฅ';
		guestbook.appendChild(entryDiv);
    }
  }

  loadGuestbook();
</script>



</body>
</html>
